# Fund Terraforming Research
ttb_decision_terraform = {
	owned_planets_only = no
    enactment_time = 0
	sound = event_laboratory_sound
	icon = decision_cold_barren_planet

	prerequisites = {
		"ttb_tech_biogenesis"
	}

	resources = {
		category = decisions
		cost = {
			energy = 10000
		}
	}

	potential = {
        # not colonized
        is_colony = no
        is_under_colonization = no

        # not already with modifier
		NOT = { has_modifier = terraforming_candidate }

        # not part of existing project
		NOT = { has_modifier = ttb_terraforming_project }
        
        # correct planet class
        ttb_pc_uses_modifier = yes
	}

	allow = {
        custom_tooltip = {
            fail_text = "TTB_REQUIRES_LARGER_PLANET"
            planet_size >= 10
        }
        custom_tooltip = {
            fail_text = "TTB_REQUIRES_NO_DYSON_SPHERE"
            NOR = {
                has_megastructure = dyson_sphere_3
                has_megastructure = dyson_sphere_4
                has_megastructure = dyson_sphere_5
            }
        }
	}

	effect = {
        custom_tooltip = TTB_DECISION_TERRAFORM_TOOLTIP
        hidden_effect = {
            add_modifier = { modifier = ttb_terraforming_project days = -1 }
            random_list = {
                1 = {
                    enable_special_project = {
                        name = "TTB_TERRAFORM_SOC"
                        location = this
                        owner = from
                    }
                }
                1 = {
                    enable_special_project = {
                        name = "TTB_TERRAFORM_PHYS"
                        location = this
                        owner = from
                    }
                }
                1 = {
                    enable_special_project = {
                        name = "TTB_TERRAFORM_ENG"
                        location = this
                        owner = from
                    }
                }
            }
        }
	}

	ai_weight = {
		weight = 0
	}
}
